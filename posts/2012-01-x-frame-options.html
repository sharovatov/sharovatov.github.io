<!DOCTYPE html>
<html>
<head>
    <title>X-FRAME-OPTIONS</title>
	<meta property="og:title" value="Виталий Шароватов о разработке и людях">
	<meta property="og:description" value="Социально-технические системы — не только просто, но и сложно">
	<meta property="og:type" value="website">
	<meta property="og:image" value="/me.jpg">
	<meta property="og:url" value="https://sharovatov.github.io">
    <link  rel="stylesheet" href="/styles/style.css" />
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <link rel="alternate" type="application/atom+xml" title="Vitaly Sharovatov" href="/atom.xml">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimal-ui">
</head>
<body>
    <div class="wrapper">
        <h1>X-FRAME-OPTIONS</h1>
<p>This X-FRAME-OPTIONS HTTP header invented by Microsoft for IE8 provides an easy way to work around <a href="http://en.wikipedia.org/wiki/Clickjacking">Clickjacking</a> security issue (see <a href="http://w2spconf.com/2010/papers/p27.pdf">this great paper</a> for even more details). The main article explaining how X-FRAME-OPTION works is this: <a href="http://blogs.msdn.com/b/ie/archive/2009/01/27/ie8-security-part-vii-clickjacking-defenses.aspx">http://blogs.msdn.com/b/ie/archive/2009/01/27/ie8-security-part-vii-clickjacking-defenses.aspx</a></p>
<p>Basically, here’s what behaviour you get with different X-FRAME-OPTIONS values:</p>
<table border="0" cellspacing="0" cellpadding="5" width="703">
    <tbody>
    <tr>
        <td valign="top" width="201">`DENY`</td>
        <td valign="top" width="500">browser will not render the iframe contents in any case</td>
    </tr>
    <tr>
        <td valign="top" width="201">`SAMEORIGIN`</td>
        <td valign="top" width="500">browser will only render the iframe contents if host page origin is the same as the iframe page origin
    </td>
    </tr>
    <tr>
        <td valign="top" width="201">`ALLOW FROM http://host`</td>
        <td valign="top" width="500">browser will only render the iframe contents if the iframe host is httр://host </td>
    </tr>
    </tbody>
</table>

<p><strong>Please note that specifying the header in META tag won’t work</strong>.</p>
<p>Good news – all browsers vendors copied this from Microsoft and now we’ve got all modern browsers supporting this header (Firefox 3.6.9, IE8, Opera 10.50, Safari 4.0, Chrome 4.1).</p>
<p>Unfortunately, for some reason only Opera and IE show a meaningful message why the frame was blocked, all others just display the empty iframe (it’s especially weird for Firefox, which should show the warning as per their bugzilla):</p>
<p><a href="http://sharovatov.files.wordpress.com/2012/01/image.png"><img title="image" border="0" alt="image" src="http://sharovatov.files.wordpress.com/2012/01/image_thumb.png?w=700&#038;h=238" width="700" height="238"></a></p>
<p>In any case, study the security papers I linked to above to understand how the attack works and what it can do to your visitors or your business.</p>
<p>However, if you strongly believe no one should embed your page in an iframe – then your silver bullet is to add <code>X-FRAME-OPTIONS: DENY</code> to all the pages you serve.</p>
<p>P.S. X-FRAME-OPTIONS is now proposed to IETF: <a href="http://tools.ietf.org/html/draft-gondrom-frame-options-01">http://tools.ietf.org/html/draft-gondrom-frame-options-01</a></p>

<div class="comments"><div id="disqus_thread"></div>
<script>
	(function(){
		window.disqus_shortname = 'sharovatov';
		window.disqus_developer = '1';
		window.disqus_url = 'http://sharovatov.github.io/posts/2012-01-x-frame-options.html';
		window.disqus_identifier = 'posts-2012-01-x-frame-options';
		window.disqus_title = 'X-FRAME-OPTIONS';
		if ( window.DISQUS ) {
			return DISQUS.reset({
				reload: true,
				config: function () {
					this.page.identifier = window.disqus_identifier;
					this.page.url = window.disqus_url;
					this.page.title = window.disqus_title;
				}
			});
		}
		else {
		  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		  dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
		  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
		}
	})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a></div>
    </div>
    
</body>
</html>